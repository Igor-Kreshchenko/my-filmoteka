{"version":3,"sources":["webpack:///./js/templates/movies.hbs","webpack:///./js/refs.js","webpack:///./js/moviesApiService.js","webpack:///./js/main.js","webpack:///./js/templates/modal.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","searchFormRef","document","querySelector","searchInputRef","searchBtnRef","moviesRef","loadMoreBtnRef","modalRef","closeBtnRef","paginationList","API_KEY","BASE_URL","MoviesApiService","this","searchQuery","page","totalPages","fetchMovies","url","fetch","then","response","ok","Error","json","results","total_pages","catch","console","log","fetchTrendingMovies","paginPage","fetchSearchMovies","fetchGenresList","fetchMovieById","id","incrementPage","decrementPage","resetPage","newQuery","newTotalPages","refs","addEventListener","event","preventDefault","moviesApiService","query","currentTarget","elements","value","movies","innerHTML","renewMoviesMarkup","e","body","classList","add","onCloseModal","target","movieCardTpl","r","moviesTpl","numberOfPages","remove","nodeName","currentPageNum","dataset","index"],"mappings":"8EAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,wGACHJ,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACrU,UACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,gBACAO,SAASP,EAA+G,OAArGA,EAASS,EAAeZ,EAAQ,QAAoB,MAAVD,EAAiBa,EAAeb,EAAO,MAAQA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,KAAK,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,KAAK,IAAM,CAAC,KAAO,EAAE,OAAS,QAAUC,GAC5S,4FACAO,SAASP,EAAuI,OAA7HA,EAASS,EAAeZ,EAAQ,oBAAgC,MAAVD,EAAiBa,EAAeb,EAAO,kBAAoBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,iBAAiB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC9U,wCACAO,SAASP,EAA6H,OAAnHA,EAASS,EAAeZ,EAAQ,eAA2B,MAAVD,EAAiBa,EAAeb,EAAO,aAAeA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC/T,MACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeZ,EAAQ,kBAA8B,MAAVD,EAAiBa,EAAeb,EAAO,gBAAkBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACxU,qBACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASL,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIiB,EAON,OAA8R,OAArRA,GAPsBrB,EAAUc,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWd,EAAQ,QAAQkB,KAAe,MAAVnB,EAAiBA,EAAUD,EAAUO,aAAe,GAAIN,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUsB,QAAQ,EAAGlB,EAAM,GAAG,QAAUJ,EAAUuB,KAAK,KAAOnB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,EAAE,OAAS,OAAiBiB,EAAS,IAC9S,SAAU,K,8EChCG,GACbG,cAAeC,SAASC,cAAc,gBACtCC,eAAgBF,SAASC,cAAc,iBACvCE,aAAcH,SAASC,cAAc,eACrCG,UAAWJ,SAASC,cAAc,WAClCI,eAAgBL,SAASC,cAAc,6BACvCK,SAAUN,SAASC,cAAc,kBACjCM,YAAaP,SAASC,cAAc,oBACpCO,eAAgBR,SAASC,cAAc,gB,0LCRzC,IAAMQ,EAAU,mCACVC,EAAW,+BAEIC,E,WACnB,aACEC,KAAKC,YAAc,GACnBD,KAAKE,KAAO,EACZF,KAAKG,WAAa,E,iCAIpBC,YAAA,SAAYC,GAAK,WACf,OAAOC,MAAMD,GACVE,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAEZ,OAAOF,EAASG,UAEjBJ,MAAK,YAA8B,IAA3BK,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,YAKhB,OAFA,EAAKV,WAAaU,EAEXD,KAERE,MAAMC,QAAQC,M,EAInBC,oBAAA,SAAoBC,GAGlB,YAHiC,IAAfA,MAAY,GAC9BlB,KAAKE,KAAOgB,EAELlB,KAAKI,YACPN,EADE,8BACoCD,EADpC,SACoDG,KAAKE,O,EAKlEiB,kBAAA,SAAkBD,GAGhB,YAH+B,IAAfA,MAAY,GAC5BlB,KAAKE,KAAOgB,EAELlB,KAAKI,YACPN,EADE,yBAC+BD,EAD/B,UACgDG,KAAKC,YADrD,SACyED,KAAKE,KAD9E,yB,EAMTkB,gBAAA,WACE,OAAOd,MAASR,EAAJ,6BAAyCD,GAClDU,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAEZ,OAAOF,EAASG,UAEjBG,MAAMC,QAAQC,M,EAInBK,eAAA,SAAeC,GACb,OAAOhB,MAASR,EAAJ,UAAsBwB,EAAtB,YAAoCzB,GAC7CU,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAEZ,OAAOF,EAASG,UAEjBG,MAAMC,QAAQC,M,EAGnBO,cAAA,WACEvB,KAAKE,MAAQ,G,EAGfsB,cAAA,WACMxB,KAAKE,MAAQ,IAIjBF,KAAKE,MAAQ,I,EAGfuB,UAAA,WACEzB,KAAKE,KAAO,G,yBAGd,WACE,OAAOF,KAAKC,a,IAGd,SAAUyB,GACR1B,KAAKC,YAAcyB,I,yBAIrB,WACE,OAAO1B,KAAKG,Y,IAGd,SAAkBwB,GAChB3B,KAAKG,WAAawB,O,0EChGtBC,EAAKzC,cAAc0C,iBAAiB,UAapC,SAAkBC,GAChBA,EAAMC,iBAGNC,EAAiBC,MAAQH,EAAMI,cAAcC,SAASF,MAAMG,MAC5DJ,EAAiBP,YACjBO,EAAiBb,oBAAoBZ,MAAK,SAAA8B,GAkB1CT,EAAKpC,UAAU8C,UAAY,GAhBzBC,EAAkBF,SApBtBT,EAAKnC,eAAeoC,iBAAiB,SAwBrC,WACEG,EAAiBb,oBAAoBZ,KAAKgC,MAxB5CX,EAAKpC,UAAUqC,iBAAiB,SAuChC,SAAqBW,GACnBpD,SAASqD,KAAKC,UAAUC,IAAI,cAC5Bf,EAAKjC,YAAYkC,iBAAiB,QAASe,GAapBtB,EAXPkB,EAAEK,OAAOvB,GAYzBU,EACGX,eAAeC,GACff,KAAKuC,KACLvC,MAAK,SAAAwC,GACJnB,EAAKlC,SAAS4C,UAAYS,KALhC,IAAyBzB,KApDzB,IAAMU,EAAmB,IAAIjC,EAyB7B,SAASwC,EAAkBF,GACzBT,EAAKpC,UAAU8C,UAAaU,IAAUX,GAGtCtB,QAAQC,IAAIgB,EAAiBiB,eAgB/B,SAASL,IACPxD,SAASqD,KAAKC,UAAUQ,OAAO,cAG/BtB,EAAKlC,SAAS4C,UAAY,GA5C1BN,EAAiBf,sBAAsBV,KAAKgC,GAyD9CX,EAAKhC,eAAeiC,iBAAiB,SAErC,SAAqBW,GACjB,GAAyB,WAAtBA,EAAEK,OAAOM,SACR,OAGJ,IAAMC,EAAiBZ,EAAEK,OAAOQ,QAAQC,MACxCtB,EAAiBf,oBAAoBmC,GAAgB7C,KAAKgC,O,qBC/E9D,IAAIhF,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,gFACHJ,SAASP,EAAiI,OAAvHA,EAASS,EAAeZ,EAAQ,iBAA6B,MAAVD,EAAiBa,EAAeb,EAAO,eAAiBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACrU,gIACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,qQACAO,SAASP,EAAmI,OAAzHA,EAASS,EAAeZ,EAAQ,kBAA8B,MAAVD,EAAiBa,EAAeb,EAAO,gBAAkBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,QAAUC,GAC3U,oCACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeZ,EAAQ,gBAA4B,MAAVD,EAAiBa,EAAeb,EAAO,cAAgBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACpU,+MACAO,SAASP,EAA+H,OAArHA,EAASS,EAAeZ,EAAQ,gBAA4B,MAAVD,EAAiBa,EAAeb,EAAO,cAAgBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACpU,mNACAO,SAASP,EAAuI,OAA7HA,EAASS,EAAeZ,EAAQ,oBAAgC,MAAVD,EAAiBa,EAAeb,EAAO,kBAAoBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,iBAAiB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAChV,0MACAO,SAASP,EAAuH,OAA7GA,EAASS,EAAeZ,EAAQ,YAAwB,MAAVD,EAAiBa,EAAeb,EAAO,UAAYA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,SAAS,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GACxT,oIACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeZ,EAAQ,cAA0B,MAAVD,EAAiBa,EAAeb,EAAO,YAAcA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,IAAI,IAAM,CAAC,KAAO,GAAG,OAAS,OAASC,GAC9T,kCACJ,SAAU,M","file":"main.31b0e300f03ff64f6d01.js","sourcesContent":["var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movies__list-item\\\">\\r\\n    <img class=\\\"movie__poster\\\" src=\\\"https://image.tmdb.org/t/p/w300\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":67},\"end\":{\"line\":3,\"column\":82}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":89},\"end\":{\"line\":3,\"column\":98}}}) : helper)))\n    + \" poster\\\" id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":111},\"end\":{\"line\":3,\"column\":117}}}) : helper)))\n    + \"\\\"\\r\\n        loading=\\\"lazy\\\" width=\\\"300\\\" height=\\\"450\\\">\\r\\n\\r\\n    <h2 class=\\\"movie__name\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"original_title\") || (depth0 != null ? lookupProperty(depth0,\"original_title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"original_title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":28},\"end\":{\"line\":6,\"column\":46}}}) : helper)))\n    + \"</h2>\\r\\n    <p class=\\\"movie__genre\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre_ids\") || (depth0 != null ? lookupProperty(depth0,\"genre_ids\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre_ids\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":28},\"end\":{\"line\":7,\"column\":41}}}) : helper)))\n    + \" | \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"release_date\") || (depth0 != null ? lookupProperty(depth0,\"release_date\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"release_date\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":44},\"end\":{\"line\":7,\"column\":60}}}) : helper)))\n    + \"</p>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":9,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\r\n  searchFormRef: document.querySelector('.search-form'),\r\n  searchInputRef: document.querySelector('.search-input'),\r\n  searchBtnRef: document.querySelector('.search-btn'),\r\n  moviesRef: document.querySelector('.movies'),\r\n  loadMoreBtnRef: document.querySelector('[data-action=\"load-more\"]'),\r\n  modalRef: document.querySelector('.modal-wrapper'),\r\n  closeBtnRef: document.querySelector('.modal-close-btn'),\r\n  paginationList: document.querySelector('.pagination'),\r\n};\r\n","const API_KEY = '4ee9f3c9031692c2042b06be7b52de80';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\nexport default class MoviesApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n    this.totalPages = 1;\r\n  }\r\n\r\n  // callback\r\n  fetchMovies(url) {\r\n    return fetch(url)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error();\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(({ results, total_pages }) => {\r\n        // Раскомментировать для кнопки load-more \r\n        // this.incrementPage();\r\n        this.totalPages = total_pages;\r\n\r\n        return results;\r\n      })\r\n      .catch(console.log);\r\n  }\r\n\r\n  // Фильмы при загрузке страницы\r\n  fetchTrendingMovies(paginPage = 1) {\r\n    this.page = paginPage;\r\n\r\n    return this.fetchMovies(\r\n      `${BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${this.page}`,\r\n    );\r\n  }\r\n\r\n  // фильмы из строки поиска\r\n  fetchSearchMovies(paginPage = 1) {\r\n    this.page = paginPage;\r\n\r\n    return this.fetchMovies(\r\n      `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${this.searchQuery}&page=${this.page}&include_adult=false`,\r\n    );\r\n  }\r\n\r\n  // Список всех жанров\r\n  fetchGenresList() {\r\n    return fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error();\r\n        }\r\n        return response.json();\r\n      })\r\n      .catch(console.log);\r\n  }\r\n\r\n  // Получить фильм по id\r\n  fetchMovieById(id) {\r\n    return fetch(`${BASE_URL}/movie/${id}?api_key=${API_KEY}`)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error();\r\n        }\r\n        return response.json();\r\n      })\r\n      .catch(console.log);\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  decrementPage() {\r\n    if (this.page <= 0) {\r\n      return;\r\n    }\r\n\r\n    this.page -= 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n\r\n  // узнать кол-во всех страниц\r\n  get numberOfPages() {\r\n    return this.totalPages;\r\n  }\r\n\r\n  set numberOfPages(newTotalPages) {\r\n    this.totalPages = newTotalPages;\r\n  }\r\n}\r\n","import refs from './refs';\r\nimport MoviesApiService from './moviesApiService';\r\nimport moviesTpl from './templates/movies.hbs';\r\nimport movieCardTpl from './templates/modal.hbs';\r\n\r\nrefs.searchFormRef.addEventListener('submit', onSearch);\r\nrefs.loadMoreBtnRef.addEventListener('click', onLoadMore);\r\nrefs.moviesRef.addEventListener('click', onOpenModal);\r\n\r\nconst moviesApiService = new MoviesApiService();\r\n\r\n// При загрузке страницы\r\nonLoadPage();\r\nfunction onLoadPage() {\r\n  moviesApiService.fetchTrendingMovies().then(renewMoviesMarkup);\r\n}\r\n// ---\r\n\r\nfunction onSearch(event) {\r\n  event.preventDefault();\r\n\r\n  // query - это атрибут name у инпута(таким образом получаем ссылку на инпут внутри формы)\r\n  moviesApiService.query = event.currentTarget.elements.query.value;\r\n  moviesApiService.resetPage();\r\n  moviesApiService.fetchSearchMovies().then(movies => {\r\n    clearMoviesContainer();\r\n    renewMoviesMarkup(movies);\r\n  });\r\n}\r\n\r\nfunction onLoadMore() {\r\n  moviesApiService.fetchSearchMovies().then(renewMoviesMarkup);\r\n}\r\n\r\nfunction renewMoviesMarkup(movies) {\r\n  refs.moviesRef.innerHTML =  moviesTpl(movies);\r\n\r\n  // Показывает ко-во страниц с фильмами\r\n  console.log(moviesApiService.numberOfPages);\r\n}\r\n\r\nfunction clearMoviesContainer() {\r\n  refs.moviesRef.innerHTML = '';\r\n}\r\n\r\n// Модалка\r\nfunction onOpenModal(e) {\r\n  document.body.classList.add('show-modal');\r\n  refs.closeBtnRef.addEventListener('click', onCloseModal);\r\n\r\n  const movieId = e.target.id;\r\n  movieCardMarkup(movieId);\r\n}\r\n\r\nfunction onCloseModal() {\r\n  document.body.classList.remove('show-modal');\r\n\r\n  // очистка бэкдропа при закрытии, чтобы старая картинка не промелькивала\r\n  refs.modalRef.innerHTML = '';\r\n}\r\n\r\nfunction movieCardMarkup(id) {\r\n  moviesApiService\r\n    .fetchMovieById(id)\r\n    .then(movieCardTpl)\r\n    .then(r => {\r\n      refs.modalRef.innerHTML = r;\r\n    });\r\n}\r\n\r\n// пагинация\r\nrefs.paginationList.addEventListener('click', onPageClick)\r\n\r\nfunction onPageClick(e){\r\n    if(e.target.nodeName !== 'BUTTON'){\r\n        return;\r\n    }\r\n\r\n    const currentPageNum = e.target.dataset.index;\r\n    moviesApiService.fetchTrendingMovies(currentPageNum).then(renewMoviesMarkup)\r\n}","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"movie-card\\\">\\r\\n\\r\\n    <img src=\\\"https://image.tmdb.org/t/p/w400\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":45},\"end\":{\"line\":3,\"column\":60}}}) : helper)))\n    + \"\\\" alt=\\\"Movie Poster\\\" class=\\\"movie-card__poster\\\" />\\r\\n\\r\\n    <div class=\\\"wrapper\\\">\\r\\n        <h2 class=\\\"movie-card__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":38},\"end\":{\"line\":6,\"column\":47}}}) : helper)))\n    + \"</h2>\\r\\n        <ul class=\\\"movie-card__info\\\">\\r\\n            <li class=\\\"movie-card__info--item\\\">\\r\\n                <h3 class=\\\"movie-card__info--title\\\">Vote / Votes</h3>\\r\\n                <p class=\\\"movie-card__content--item\\\"><span class=\\\"movie-card__vote\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_average\") || (depth0 != null ? lookupProperty(depth0,\"vote_average\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_average\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":84},\"end\":{\"line\":10,\"column\":100}}}) : helper)))\n    + \"</span> /\\r\\n                    \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"vote_count\") || (depth0 != null ? lookupProperty(depth0,\"vote_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"vote_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":20},\"end\":{\"line\":11,\"column\":34}}}) : helper)))\n    + \"</p>\\r\\n            </li>\\r\\n            <li class=\\\"movie-card__info--item\\\">\\r\\n                <h3 class=\\\"movie-card__info--title\\\">Popularity</h3>\\r\\n                <p class=\\\"movie-card__content--item\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"popularity\") || (depth0 != null ? lookupProperty(depth0,\"popularity\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"popularity\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":53},\"end\":{\"line\":15,\"column\":67}}}) : helper)))\n    + \"</p>\\r\\n            </li>\\r\\n            <li class=\\\"movie-card__info--item\\\">\\r\\n                <h3 class=\\\"movie-card__info--title\\\">Original Title</h3>\\r\\n                <p class=\\\"movie-card__content--item\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"original_title\") || (depth0 != null ? lookupProperty(depth0,\"original_title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"original_title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":53},\"end\":{\"line\":19,\"column\":71}}}) : helper)))\n    + \"</p>\\r\\n            </li>\\r\\n            <li class=\\\"movie-card__info--item\\\">\\r\\n                <h3 class=\\\"movie-card__info--title\\\">Genre</h3>\\r\\n                <p class=\\\"movie-card__content--item\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genres\") || (depth0 != null ? lookupProperty(depth0,\"genres\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genres\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":53},\"end\":{\"line\":23,\"column\":63}}}) : helper)))\n    + \"</p>\\r\\n        </ul>\\r\\n\\r\\n        <h3 class=\\\"movie-card__about\\\">About</h3>\\r\\n        <div class=\\\"movie-card__about--content\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"overview\") || (depth0 != null ? lookupProperty(depth0,\"overview\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"overview\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":48},\"end\":{\"line\":27,\"column\":60}}}) : helper)))\n    + \"</div>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}